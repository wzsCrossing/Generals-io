# Generals-io

## 项目介绍

### 项目简介

本项目是对多人在线策略塔防游戏[将军棋](http://generals.io/)的复刻，玩家可以在本地进行人机游戏，也可通过局域网联机对战。

<center> <img src = "/docs/img/init.png" width = 50%> </center>

### 游戏规则简述

#### 游戏地图

游戏在一块大小为 $n \times m$ 棋盘上进行，其中有四种格子：基地、障碍、要塞和空地。
- 基地：每名玩家有一座初始基地，一旦被其他玩家占领，该玩家出局
- 障碍：不可被经过，也不可被占有
- 要塞：初始时不被任何玩家占有且拥有若干兵力，可以被玩家占领，占领后开始产出兵力
- 空地：可以被玩家占领

除了障碍外，每个格子都可以被一名玩家**占有**，玩家所占有的格子中可以驻扎一定单位的**兵力**。

#### 游戏操作与进程

游戏开始时，每名玩家占有一座基地与 1 单位兵力。

游戏以**回合**为单位进行。每个回合，玩家可以移动自己所占有格子中的兵力到相邻格子中。如果目标格子已被该玩家占有，则进行兵力叠加；若不被该玩家占有，则进行兵力抵消，若抵消后该玩家兵力为正，则**占领**目标格子。

若玩家 A 的基地被玩家 B 占领，则玩家 A 立即出局。同时，该基地变为玩家 B 的要塞，该玩家占有的其他所有格子的兵力会减半并归玩家 B 所有。

当场上只剩一名玩家时，游戏结束，该玩家获胜。

#### 兵力产出

每个**游戏回合**开始时，玩家占有的**基地**和**要塞**会产出 1 单位兵力。

每隔 25 个游戏回合（即第 25, 50, 75, ... 回合），玩家占有的**空地**会产出 1 单位兵力。基地和要塞不会叠加产生。

#### 可见信息

每名玩家游戏中可以获得的公开信息如下：
- 当前回合数
- 每名存活玩家的总兵力与占领格子数
- 自己占领的格子上的兵力
- 与自己占领格子八连通的格子状态

对于其他不可见格子，若该格子是障碍物/要塞，则该格子被标记为**不可见的障碍物**，否则被标记为**不可见的空地**。

<center> <img src = "/docs/img/demo1.png" width = 50%> </center>

## 需求分析

### 基本需求

- 实现游戏地图的随机生成
- 实现游戏的基本操作
- 实现图形界面的即时显示
- 实现离线人机对战（即实现游戏 bot）

### 进阶需求

- 实现自定义地图/导入地图功能
- 实现对局回放功能
- 丰富游戏模式与地图元素
- 实现多人局域网联机对战

## 开发技术规划

**第一轮迭代**
- [x] 地图随机生成
- [x] 游戏基本操作
- [x] 图形界面显示

**第二轮迭代**
- [x] 实时排行榜和公告栏的显示
- [x] 支持用户操作快捷键
- [x] 离线人机对战

**第三轮迭代**
- [x] 自定义地图功能
- [x] 丰富游戏模式
- [x] 对局回放功能

## 开发工具

- 版本控制：Git/Github
- 开发环境：VS Code/QT Creator
- 编程语言：C++17
- 构建工具：CMake
- 文档编写：Markdown
- 架构模式：MVVM

## 小组分工

|  组员  | 分工 |
| ----- |  - |
| 王造时 | App 层、Common 层 |
| 胡思远 | Window & View 层 |
| 徐若禺 | Model 层、ViewModel 层 |